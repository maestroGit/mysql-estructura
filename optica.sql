CREATE SCHEMA IF NOT EXISTS `optica` DEFAULT CHARACTER SET utf8 ;
USE `optica` ;
CREATE TABLE IF NOT EXISTS `optica`.`proveedor` (  `id_proveedor` INT(11) NOT NULL,  `nombre` VARCHAR(45) NULL,  `calle` VARCHAR(45) NOT NULL,  `numero` INT(11) NOT NULL,  `piso` INT(11) NOT NULL,  `puerta` VARCHAR(10) NOT NULL,  `ciudad` VARCHAR(45) NOT NULL,  `codigo_postal` INT(11) NOT NULL,  `pais` VARCHAR(45) NOT NULL,  `telefono` INT(11) NULL,  `fax` INT(11) NULL,  `NIF` VARCHAR(45) NULL,  PRIMARY KEY (`id_proveedor`));
CREATE TABLE IF NOT EXISTS `optica`.`tipo_montura` (  `id_montura` INT NOT NULL AUTO_INCREMENT,  `tipo` VARCHAR(45) NOT NULL,  `color` VARCHAR(45) NOT NULL,  PRIMARY KEY (`id_montura`));
CREATE TABLE IF NOT EXISTS `optica`.`productos` (  `id_productos` INT(11) NOT NULL,  `marca` VARCHAR(45) NULL,  `graduacion_derecho` INT(11) NULL,  `graduacion_izquierdo` INT(11) NULL,  `precio` DECIMAL(2) NULL,  `id_proveedor` INT(11) NULL,  `id_montura` INT(11) NULL,  PRIMARY KEY (`id_productos`),  INDEX `id_proveedor_idx` (`id_proveedor` ASC),  INDEX `id_montura_idx` (`id_montura` ASC),  CONSTRAINT `id_proveedor`    FOREIGN KEY (`id_proveedor`)    REFERENCES `optica`.`proveedor` (`id_proveedor`)    ON DELETE CASCADE    ON UPDATE CASCADE,  CONSTRAINT `id_montura`    FOREIGN KEY (`id_montura`)    REFERENCES `optica`.`tipo_montura` (`id_montura`)    ON DELETE CASCADE    ON UPDATE CASCADE);
CREATE TABLE IF NOT EXISTS `optica`.`presentador` (  `id_presentador` INT(11) NOT NULL,  `nombre` VARCHAR(45) NULL,  PRIMARY KEY (`id_presentador`));
CREATE TABLE IF NOT EXISTS `optica`.`clientes` (  `id_clientes` INT(11) NOT NULL,  `codigo_postal` VARCHAR(45) NULL,  `telefono` INT(11) NULL,  `email` VARCHAR(45) NULL,  `fecha_registro` DATETIME NOT NULL,  `id_presentador` INT(11) NULL,  PRIMARY KEY (`id_clientes`),  INDEX `id_presentador_idx` (`id_presentador` ASC),  CONSTRAINT `id_presentador`    FOREIGN KEY (`id_presentador`)    REFERENCES `optica`.`presentador` (`id_presentador`)    ON DELETE NO ACTION    ON UPDATE NO ACTION);
CREATE TABLE IF NOT EXISTS `optica`.`empleados` (  `id_empleados` INT(11) NOT NULL,  `nombre` VARCHAR(45) NULL,  PRIMARY KEY (`id_empleados`));
CREATE TABLE IF NOT EXISTS `optica`.`ventas` (  `id_venta` INT(11) NOT NULL,  `fecha` DATETIME NOT NULL,  `id_productos` INT(11) NULL,  `id_clientes` INT(11) NULL,  `id_empleados` INT(11) NULL,  PRIMARY KEY (`id_venta`),  INDEX `id_productos_idx` (`id_productos` ASC),  INDEX `id_empleados_idx` (`id_empleados` ASC),  INDEX `id_clientes_idx` (`id_clientes` ASC),  CONSTRAINT `id_productos`    FOREIGN KEY (`id_productos`)    REFERENCES `optica`.`productos` (`id_productos`)    ON DELETE NO ACTION    ON UPDATE NO ACTION,  CONSTRAINT `id_empleados`    FOREIGN KEY (`id_empleados`)    REFERENCES `optica`.`empleados` (`id_empleados`)    ON DELETE NO ACTION    ON UPDATE NO ACTION,  CONSTRAINT `id_clientes`    FOREIGN KEY (`id_clientes`)    REFERENCES `optica`.`clientes` (`id_clientes`)    ON DELETE NO ACTION    ON UPDATE NO ACTION);

INSERT INTO proveedor (id_proveedor, nombre ,calle ,numero ,piso ,puerta , ciudad, codigo_postal, pais, fax, NIF) VALUES (1, 'Jenny' ,'Pío' ,5 ,33 ,'b' , 'Sevilla', 01025, 'España', 935536982, 56982563), ( 2,'Jaan' ,'Mayor' ,4 ,3 ,'a' , 'Madrid', 08025, 'España', 935269852, 56982563);
INSERT INTO tipo_montura (id_montura, tipo, color) VALUES (1, 'metalica', 'gris'),(2, 'pasta', 'roja');
INSERT INTO presentador (id_presentador, nombre) VALUES (1, 'Barnagafas'),(2, 'Veoveo');
INSERT INTO productos (id_productos, marca, graduacion_derecho, graduacion_izquierdo, precio, id_proveedor, id_montura) VALUES (1, 'marca', 1, 2, 25, 1, 1),(2, 'blanca', 3, 5, 18, 2, 2);
INSERT INTO clientes (id_clientes, codigo_postal, telefono, email, fecha_registro, id_presentador) VALUES (1, 08758, 953698752, 'pepe@pepe.com', '2020-01-01 10:10:10', 1), (2, 88874, 896598752, 'jos@jos.com', '2020-12-11 20:00:00', 2);
INSERT INTO empleados (id_empleados, nombre) VALUES (1, 'Julian Gómez'), (2, 'Jaime Lucas');
INSERT INTO ventas (id_venta, fecha, id_productos, id_clientes, id_empleados) VALUES (1, '2020-01-01 10:10:10', 1, 1, 1), (2, '2020-02-01 18:18:10', 2, 2, 2);